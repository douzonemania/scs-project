<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="product">

	<select id="getItemNo" parameterType="map" resultType="Integer">		
				<![CDATA[
					select no from ${db}.item where code=#{code}
				]]>
	</select>
	
	<select id="getList" parameterType="map" resultType="itemvo">		
				<![CDATA[
					select no, code, name, sup_price as 'supPrice', now_price as 'nowPrice', 
						sale, main_image as 'mainImage', sub_image as 'subImage', 
						visible, best_item as 'bestItem', new_item as 'newItem', editor, category_no,
						description, reg_date as 'regDate'
					from ${db}.item
				]]>
	</select>
	
	<select id="findItem" parameterType="map" resultType="itemvo">		
				<![CDATA[
					select no, code, name, sup_price as 'supPrice', now_price as 'nowPrice', 
						sale, main_image as 'mainImage', sub_image as 'subImage', 
						visible, best_item as 'bestItem', new_item as 'newItem', editor, category_no,
						description, reg_date as 'regDate', category_no as 'categoryNo'
					from ${db}.item
					where no = #{no}
				]]>
	</select>
	
	<select id="getShipCompanyList" parameterType="map" resultType="shipcompanyvo">		
				<![CDATA[
					select no, name from scs2.ship_company where id = #{db}
				]]>
	</select>	

	<insert id="regItem" parameterType="map">
				<![CDATA[
					insert into ${db}.item values (null, #{iVo.code}, #{iVo.name}, #{iVo.supPrice}, #{iVo.nowPrice}, #{iVo.sale}, #{iVo.mainImage}, #{iVo.subImage}, #{iVo.visible}, #{iVo.bestItem}, #{iVo.newItem}, #{iVo.editor}, #{iVo.categoryNo}, #{iVo.description}, now(), #{iVo.shipCompany}, #{iVo.shipCharge})
				]]>
	</insert>
	
	<insert id="insertStock" parameterType="map">
				<![CDATA[
					insert into ${db}.stock values (null, #{itemNo}, #{sVo.firstOption}, #{sVo.secondOption}, #{sVo.stock});
				]]>
	</insert>		
</mapper>

